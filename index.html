<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Arena Pro | User Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
 --bg:#0f172a;--card:#1e293b;--accent:#3b82f6;
 --text:#f8fafc;--muted:#94a3b8;--danger:#ef4444
}
*{box-sizing:border-box;font-family:Inter}
body{margin:0;background:var(--bg);color:var(--text)}
nav{background:#1e293b;padding:14px 5%;display:flex;justify-content:space-between;align-items:center}
.badge{background:var(--accent);padding:6px 14px;border-radius:999px}
.wrap{max-width:1200px;margin:auto;padding:20px}
.card{background:var(--card);border-radius:14px;padding:16px;margin-bottom:16px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
.btn{padding:10px;border:none;border-radius:10px;font-weight:600;cursor:pointer}
.primary{background:var(--accent);color:#fff}
.primary:disabled{background:#475569}
.ad{border:1px dashed #475569;color:#475569;padding:12px;text-align:center;border-radius:10px;margin:12px 0}
.board{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.cell{background:#020617;height:80px;display:flex;align-items:center;justify-content:center;font-size:2rem;border-radius:10px;cursor:pointer}
input{width:100%;padding:10px;border-radius:8px;border:1px solid #334155;background:#020617;color:#fff;margin-top:8px}
footer{margin-top:30px;padding:20px;text-align:center;font-size:.8rem;color:#64748b;background:#020617}
</style>
</head>

<body>

<!-- üîä SOUNDS -->
<audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-video-game-win-2016.mp3"></audio>
<audio id="loseSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-over-213.mp3"></audio>

<nav>
  <b>ARENA.PRO</b>
  <div class="badge">üéüÔ∏è <span id="tickets">0</span></div>
</nav>

<div class="wrap">

<div class="ad">MONETAG BANNER</div>

<div class="card">
  <h3 id="uname"></h3>
  <p>Status: <span id="ustatus">Active</span></p>
  <button class="btn" onclick="editProfile()">Edit Username</button>
</div>

<h3>üéÆ Games (Anti-Cheat + AI)</h3>
<div class="grid">

<!-- TIC TAC TOE -->
<div class="card">
<b>Tic Tac Toe (Hard AI)</b>
<p style="color:var(--muted)">Win = +2 tickets | Cooldown 30s</p>
<div class="board" id="tttBoard"></div>
<p id="tttStatus"></p>
<button class="btn primary" onclick="resetTTT()">Restart</button>
</div>

<!-- NUMBER GUESS -->
<div class="card">
<b>Number Guess</b>
<p style="color:var(--muted)">Correct = +1 ticket</p>
<input id="guessInput" type="number" min="1" max="5" placeholder="1‚Äì5">
<button class="btn primary" onclick="playGuess()">Submit</button>
<p id="guessStatus"></p>
</div>

<!-- REACTION -->
<div class="card">
<b>Reaction Test</b>
<p style="color:var(--muted)">Under 500ms = +1 ticket</p>
<button class="btn primary" onclick="startReaction()">Start</button>
<p id="reactionStatus"></p>
</div>

</div>

<div class="ad">MONETAG NATIVE</div>

<h3>üèÜ Tournaments</h3>
<div id="tournaments" class="grid"></div>

<div class="ad">MONETAG BANNER</div>
</div>

<footer>
<a href="https://www.instagram.com/malik_boy_5798?igsh=cjM1MmN1cXVvcml6" style="color:#3b82f6">Contact</a>
<p>No real money ‚Ä¢ Tickets have zero value</p>
</footer>

<script>
/* ================= CORE USER SYSTEM ================= */
const MAX_TICKETS_PER_HOUR=10;
const COOLDOWN=30000;

let user=JSON.parse(localStorage.user||"null")||{
 name:"Player"+Math.floor(Math.random()*9000),
 tickets:5,lastHour:Date.now(),earned:0,lastGame:{},flag:false,history:[]
};

let tournaments=JSON.parse(localStorage.tournaments||"[]");
let analytics=JSON.parse(localStorage.analytics||"{}");

function save(){
 localStorage.user=JSON.stringify(user);
 tickets.innerText=user.tickets;
 uname.innerText=user.name;
 if(user.flag) ustatus.innerText="Flagged";
}

function playSound(id){const s=document.getElementById(id);if(s){s.currentTime=0;s.play()}}

function track(e){analytics[e]=(analytics[e]||0)+1;localStorage.analytics=JSON.stringify(analytics)}

function canEarn(g){
 const n=Date.now();
 if(n-(user.lastGame[g]||0)<COOLDOWN) return false;
 if(n-user.lastHour>3600000){user.lastHour=n;user.earned=0}
 if(user.earned>=MAX_TICKETS_PER_HOUR){user.flag=true;return false}
 user.lastGame[g]=n;return true
}
function reward(n){user.tickets+=n;user.earned+=n;track("ticket");save()}

/* ================= TIC TAC TOE AI (MINIMAX) ================= */
let ttt=["","","","","","","","",""];let over=false;
const win=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

function drawTTT(){
 tttBoard.innerHTML="";
 ttt.forEach((v,i)=>{
  const d=document.createElement("div");
  d.className="cell";d.innerText=v;
  d.onclick=()=>move(i);tttBoard.appendChild(d)
 })
}
function move(i){
 if(ttt[i]||over) return;
 playSound("clickSound");
 ttt[i]="X";check();
 if(!over){ai();check()}
 drawTTT()
}
function ai(){
 let best=-1e9,move;
 for(let i=0;i<9;i++){
  if(ttt[i]==""){
   ttt[i]="O";let s=minimax(ttt,false);ttt[i]="";
   if(s>best){best=s;move=i}
  }
 }
 ttt[move]="O"
}
function minimax(b,max){
 let r=evalTTT(b);if(r!=null)return r;
 let best=max?-1e9:1e9;
 for(let i=0;i<9;i++){
  if(b[i]==""){
   b[i]=max?"O":"X";
   let s=minimax(b,!max);
   b[i]="";
   best=max?Math.max(best,s):Math.min(best,s)
  }
 }
 return best
}
function evalTTT(b){
 for(let [a,c,d] of win){
  if(b[a]&&b[a]==b[c]&&b[a]==b[d]) return b[a]=="O"?10:-10
 }
 return b.includes("")?null:0
}
function check(){
 for(let [a,b,c] of win){
  if(ttt[a]&&ttt[a]==ttt[b]&&ttt[a]==ttt[c]){
   over=true;
   if(ttt[a]=="X"&&canEarn("ttt")){
    reward(2);playSound("winSound");tttStatus.innerText="You win +2 üéüÔ∏è"
   }else playSound("loseSound")
  }
 }
}
function resetTTT(){ttt=["","","","","","","","",""];over=false;tttStatus.innerText="";drawTTT()}
drawTTT();

/* ================= OTHER GAMES ================= */
function playGuess(){
 if(!canEarn("guess")) return;
 const n=Math.floor(Math.random()*5)+1;
 if(+guessInput.value===n){reward(1);guessStatus.innerText="Correct +1 üéüÔ∏è";playSound("winSound")}
 else guessStatus.innerText="Wrong ("+n+")"
}

let reactStart=0;
function startReaction(){
 reactionStatus.innerText="Wait...";
 setTimeout(()=>{
  reactStart=Date.now();reactionStatus.innerText="CLICK!";
  document.body.onclick=()=>{
   let t=Date.now()-reactStart;document.body.onclick=null;
   if(t<500&&canEarn("react")){reward(1);reactionStatus.innerText="Fast "+t+"ms";playSound("winSound")}
   else reactionStatus.innerText="Slow "+t+"ms"
  }
 },Math.random()*2000+1000)
}

/* ================= TOURNAMENT ================= */
function renderT(){
 tournamentsBox.innerHTML="";
 tournaments.forEach(t=>{
  const joined=user.history.includes(t.id);
  const full=t.joined>=t.slots;
  const dis=joined||full||user.tickets<t.cost||t.status!="Open";
  tournamentsBox.innerHTML+=`
  <div class="card">
   <b>${t.name}</b>
   <p>${t.game} ‚Ä¢ ${t.date}</p>
   <p>üë• ${t.joined}/${t.slots} ‚Ä¢ üéüÔ∏è ${t.cost}</p>
   <button class="btn primary" ${dis?"disabled":""}
   onclick="joinT('${t.id}')">${joined?"JOINED":full?"FULL":"JOIN"}</button>
  </div>`
 })
}
function joinT(id){
 const t=tournaments.find(x=>x.id===id);
 if(user.tickets<t.cost)return;
 user.tickets-=t.cost;t.joined++;user.history.push(id);
 localStorage.tournaments=JSON.stringify(tournaments);
 track("join");save();renderT()
}
function editProfile(){
 const n=prompt("Username",user.name);
 if(n){user.name=n;save()}
}

const tournamentsBox=document.getElementById("tournaments");
save();renderT();
window.addEventListener("storage",()=>{tournaments=JSON.parse(localStorage.tournaments||"[]");renderT()});
</script>
</body>
</html>